{
  "x402Version": 1,
  "name": "x402-stacks AI Analytics",
  "image": "https://x402stacks.xyz/logo.png",
  "accepts": [
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "1000",
      "resource": "/api/news",
      "description": "Get latest Stacks and Bitcoin news with AI analysis",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "GET"
        },
        "output": {
          "news": "array",
          "analysis": "string",
          "timestamp": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "20000",
      "resource": "/api/audit",
      "description": "Security audit for Clarity smart contracts",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 120,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "contractIdentifier": {
              "type": "string",
              "required": true,
              "description": "Contract identifier (e.g., SP123.contract-name)"
            }
          }
        },
        "output": {
          "vulnerabilities": "array",
          "riskLevel": "string",
          "recommendations": "array",
          "score": "number"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/wallet/classify",
      "description": "Classify wallet behavior (trader, whale, bot, dao, bridge)",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks wallet address to classify"
            }
          }
        },
        "output": {
          "classification": "string",
          "confidence": "number",
          "traits": "array",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/research/user",
      "description": "Research user profile from X/Twitter and web sources",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 90,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "username": {
              "type": "string",
              "required": true,
              "description": "X/Twitter username to research"
            }
          }
        },
        "output": {
          "profile": "object",
          "sentiment": "string",
          "summary": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/sentiment",
      "description": "Real-time sentiment analysis for crypto tokens on X/Twitter",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "topic": {
              "type": "string",
              "required": false,
              "description": "Topic or token to analyze sentiment for"
            }
          }
        },
        "output": {
          "sentiment": "string",
          "score": "number",
          "analysis": "string",
          "sources": "array"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/wallet/trading",
      "description": "AI-enhanced wallet trading behavior analysis",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks wallet address to analyze"
            }
          }
        },
        "output": {
          "tradingPattern": "string",
          "frequency": "string",
          "profitability": "object",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/wallet/pnl",
      "description": "AI-enhanced wallet profit/loss analysis",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks wallet address to analyze"
            }
          }
        },
        "output": {
          "totalPnl": "number",
          "realizedPnl": "number",
          "unrealizedPnl": "number",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/alex/swap-optimizer",
      "description": "AI swap route optimizer - finds optimal routes, calculates slippage, recommends execution strategy",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "tokenIn": {
              "type": "string",
              "required": true,
              "description": "Input token symbol or contract"
            },
            "tokenOut": {
              "type": "string",
              "required": true,
              "description": "Output token symbol or contract"
            },
            "amountIn": {
              "type": "number",
              "required": true,
              "description": "Amount of input token"
            }
          }
        },
        "output": {
          "optimalRoute": "array",
          "expectedOutput": "number",
          "slippage": "number",
          "recommendation": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "8000",
      "resource": "/api/alex/pool-risk",
      "description": "LP position risk analyzer - impermanent loss scenarios, pool sustainability assessment",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "poolId": {
              "type": "string",
              "required": true,
              "description": "Alex pool identifier"
            },
            "investmentAmount": {
              "type": "number",
              "required": false,
              "description": "Investment amount for IL calculation"
            }
          }
        },
        "output": {
          "riskLevel": "string",
          "impermanentLossScenarios": "array",
          "sustainability": "object",
          "recommendation": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "10000",
      "resource": "/api/alex/arbitrage-scan",
      "description": "Cross-pool arbitrage scanner - finds price discrepancies, calculates profitable paths",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "GET"
        },
        "output": {
          "opportunities": "array",
          "bestPath": "object",
          "expectedProfit": "number",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/alex/market-regime",
      "description": "Market regime detector - classifies current market conditions (trending, ranging, volatile)",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "GET"
        },
        "output": {
          "regime": "string",
          "confidence": "number",
          "indicators": "object",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "8000",
      "resource": "/api/zest/liquidation-risk",
      "description": "Liquidation risk monitor - health factor analysis, price scenario simulation, liquidation probability",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks wallet address"
            },
            "collateralAsset": {
              "type": "string",
              "required": true,
              "description": "Collateral asset symbol"
            },
            "collateralAmount": {
              "type": "number",
              "required": true,
              "description": "Amount of collateral"
            },
            "debtAsset": {
              "type": "string",
              "required": true,
              "description": "Debt asset symbol"
            },
            "debtAmount": {
              "type": "number",
              "required": true,
              "description": "Amount of debt"
            }
          }
        },
        "output": {
          "healthFactor": "number",
          "liquidationPrice": "number",
          "riskLevel": "string",
          "scenarios": "array"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "8000",
      "resource": "/api/zest/yield-optimizer",
      "description": "Lending yield optimizer - analyzes all markets, recommends optimal supply/borrow strategy",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "capitalUsd": {
              "type": "number",
              "required": true,
              "description": "Capital to deploy in USD"
            },
            "riskTolerance": {
              "type": "string",
              "required": true,
              "description": "Risk tolerance: conservative, moderate, or aggressive"
            },
            "preferredAssets": {
              "type": "array",
              "required": false,
              "description": "Preferred assets to use"
            }
          }
        },
        "output": {
          "strategy": "object",
          "expectedYield": "number",
          "risks": "array",
          "recommendation": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/zest/interest-forecast",
      "description": "Interest rate forecaster - predicts rate movements based on utilization trends",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "GET"
        },
        "output": {
          "forecasts": "array",
          "trends": "object",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/zest/position-health",
      "description": "Position health analyzer - comprehensive health check with AI rebalancing recommendations",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks wallet address"
            },
            "positions": {
              "type": "array",
              "required": true,
              "description": "Array of positions with asset, supplied, and borrowed amounts"
            }
          }
        },
        "output": {
          "overallHealth": "string",
          "positionDetails": "array",
          "recommendations": "array"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "15000",
      "resource": "/api/defi/portfolio-analyzer",
      "description": "DeFi portfolio intelligence - analyzes combined Alex LP + Zest positions, risk assessment, optimization",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 90,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks wallet address"
            },
            "alexPositions": {
              "type": "array",
              "required": false,
              "description": "Alex LP positions"
            },
            "zestPositions": {
              "type": "array",
              "required": false,
              "description": "Zest lending positions"
            }
          }
        },
        "output": {
          "totalValue": "number",
          "riskAssessment": "object",
          "optimization": "object",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "20000",
      "resource": "/api/defi/strategy-builder",
      "description": "AI strategy builder - generates complete DeFi strategy across Alex and Zest with execution plan",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 120,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "capitalUsd": {
              "type": "number",
              "required": true,
              "description": "Capital to deploy in USD"
            },
            "riskTolerance": {
              "type": "string",
              "required": true,
              "description": "Risk tolerance: conservative, moderate, or aggressive"
            },
            "goals": {
              "type": "array",
              "required": true,
              "description": "Investment goals: yield, growth, hedge, income"
            },
            "timeHorizon": {
              "type": "string",
              "required": true,
              "description": "Time horizon: short, medium, or long"
            },
            "preferences": {
              "type": "object",
              "required": false,
              "description": "Optional preferences for assets and leverage"
            }
          }
        },
        "output": {
          "strategy": "object",
          "allocations": "array",
          "executionPlan": "array",
          "expectedReturns": "object",
          "risks": "array"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/bns/valuation",
      "description": "AI valuation for BNS domain names with market comparisons and rarity analysis",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "name": {
              "type": "string",
              "required": true,
              "description": "BNS domain name to valuate (e.g., 'alice.btc')"
            }
          }
        },
        "output": {
          "name": "string",
          "estimatedValue": "object",
          "category": "string",
          "rarity": "string",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "8000",
      "resource": "/api/bns/portfolio",
      "description": "AI analysis of BNS domain portfolio with valuation and recommendations",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks address to analyze BNS holdings"
            }
          }
        },
        "output": {
          "totalValue": "object",
          "domains": "array",
          "recommendations": "array",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "5000",
      "resource": "/api/sbtc/whale-flows",
      "description": "Track sBTC whale movements with sentiment analysis",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "GET",
          "queryParams": {
            "hours": {
              "type": "number",
              "required": false,
              "description": "Hours to analyze (default: 24, max: 168)"
            }
          }
        },
        "output": {
          "timeframe": "string",
          "totalInflow": "number",
          "totalOutflow": "number",
          "whaleTransactions": "array",
          "sentiment": "string",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "8000",
      "resource": "/api/sbtc/farming-scanner",
      "description": "Scan sBTC yield farming opportunities with AI recommendations",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 90,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "balanceSats": {
              "type": "number",
              "required": false,
              "description": "User's sBTC balance in satoshis for projected returns"
            }
          }
        },
        "output": {
          "userBalance": "number",
          "opportunities": "array",
          "recommendation": "object",
          "projectedReturns": "object",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "8000",
      "resource": "/api/nft/portfolio-valuation",
      "description": "AI valuation of NFT portfolio with collection analysis",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "POST",
          "bodyType": "json",
          "bodyFields": {
            "address": {
              "type": "string",
              "required": true,
              "description": "Stacks address to analyze NFT holdings"
            }
          }
        },
        "output": {
          "totalValue": "object",
          "holdings": "array",
          "collections": "array",
          "recommendations": "array",
          "analysis": "string"
        }
      }
    },
    {
      "scheme": "exact",
      "network": "stacks",
      "maxAmountRequired": "15000",
      "resource": "/api/whale/smart-money",
      "description": "Track smart money movements and whale patterns with AI labeling",
      "mimeType": "application/json",
      "payTo": "${SERVER_ADDRESS}",
      "maxTimeoutSeconds": 60,
      "asset": "STX",
      "outputSchema": {
        "input": {
          "type": "http",
          "method": "GET",
          "queryParams": {
            "limit": {
              "type": "number",
              "required": false,
              "description": "Number of whale trades to analyze (default: 20, max: 100)"
            }
          }
        },
        "output": {
          "whales": "array",
          "patterns": "object",
          "marketImpact": "object",
          "analysis": "string"
        }
      }
    }
  ]
}
